const axios=require("axios"),cheerio=require("cheerio");function validateDate(t){if(!(t instanceof Date)&&isNaN(t)&&t>new Date)throw new Error("Invalid date");if("string"==typeof param){const t=new Date(param);if(!isNaN(t))throw new Error("Invalid date")}}function clearText(t=""){return t.replace(/\s+/g," ").trim()}const axiosInstance=axios.create({baseURL:"https://loteriasdominicanas.com",timeout:15e3,headers:{"Content-Type":"text/html; charset=utf-8",Accept:"text/html"}}),_getLottery=(t="",e,a=!1)=>{const n=[];let o={};const r=cheerio.load(t);if(r)if(a){r(".game-block","section>.row").each(((t,a)=>{o={};let c=r(a),g=clearText(c.find(".session-date").first().text());o.name=clearText(c.find(".game-title>span").first().text()),o.date=`${g}-${e}`,o.numbers=[],c.find(".game-scores>span").each(((t,e)=>{e=clearText(r(e).text()),o.numbers.push(e)})),n.push(o)}))}else{let t=r(".game-block","section>.row").first();o={};let a=r(t),c=clearText(a.find(".session-date").first().text());o.name=clearText(a.find(".game-title>span").first().text()),o.date=`${c}-${e}`,o.numbers=[],a.find(".game-scores>span").each(((t,e)=>{e=clearText(r(e).text()),o.numbers.push(e)})),n.push(o)}return n},_getLoto=(t="",e)=>{const a=[];let n={};const o=cheerio.load(t);if(o){let t=o(".game-block","section>.row").first();n={};let r=o(t),c=clearText(r.find(".session-date").first().text());n.name=clearText(r.find(".game-title>span").first().text()),n.date=`${c}-${e}`,n.numbers=[];let g=r.find(".game-scores>span");for(let t=0;t<6;t++)num=clearText(o(g[t]).text()),n.numbers.push(clearText(o(g[t]).text()));n.plus=clearText(r.find(".game-scores>.special2").last().text());const i=clearText(r.find(".game-scores>.special1").last().text());""!==i&&(n.superplus=i),a.push(n)}return a};function getAllLotteries(t=new Date){validateDate(t);const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e,!0)})).catch((t=>{throw t}))}function getPegaMas(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/loteria-nacional/juega-mas-pega-mas?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getGanaMas(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/loteria-nacional/gana-mas?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getNacional(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/loteria-nacional/quiniela?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getQuinielaPale(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/leidsa/quiniela-pale?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getLotoPoolLeidsa(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/leidsa/loto-pool?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getPega3MasLeidsa(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/leidsa/pega-3-mas?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getSuperPaleLeidsa(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/leidsa/super-pale?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getSuperKinoTVLeidsa(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/leidsa/super-kino-tv?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getLotomasLeidsa(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/leidsa/loto-mas?date=${t}`).then((async t=>{const a=await t.data;return _getLoto(a,e)})).catch((t=>{throw t}))}function getReal(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/loto-real/quiniela?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getLotoReal(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/loto-real/loto?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getNYReal(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/loto-real/nueva-yol-real?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getLotoPoolReal(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/loto-real/loto-pool?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getPega4Real(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/loto-real/pega-4?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getSuperPaleReal(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/loto-real/super-pale?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getQuinielaLoteka(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/loteka/quiniela-mega-decenas?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getMegaChanceLoteka(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/loteka/mega-chance?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getToca3Loteka(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/loteka/toca-3?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getMCRepatideraLoteka(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/loteka/mega-chances-repartidera?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getMegaLotoLoteka(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/loteka/megalotto?date=${t}`).then((async t=>{const a=await t.data;return _getLoto(a,e)})).catch((t=>{throw t}))}function getPrimeraDia(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/la-primera/quiniela-medio-dia?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getPrimeraNoche(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/la-primera/quiniela-noche?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getQuinielonDia(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/la-primera/el-quinielon-dia?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getQuinielonNoche(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/la-primera/el-quinielon-noche?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getLoto5(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/la-primera/loto-5?date=${t}`).then((async t=>{const a=await t.data,n=[];let o={};const r=cheerio.load(a);if(r){let t=r(".game-block","section>.row").first();o={};let a=r(t),c=clearText(a.find(".session-date").first().text());o.name=clearText(a.find(".game-title>span").first().text()),o.date=`${c}-${e}`,o.numbers=[];let g=a.find(".game-scores>span");for(let t=0;t<5;t++)num=clearText(r(g[t]).text()),o.numbers.push(clearText(r(g[t]).text()));o.bonus=clearText(a.find(".game-scores>.bonus").last().text()),n.push(o)}return n})).catch((t=>{throw t}))}function getSuerteDia(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/la-suerte-dominicana/quiniela?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getSuerteNoche(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/la-suerte-dominicana/quiniela-tarde?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getLoteDom(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/lotedom/quiniela?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getQuemaito(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/lotedom/el-quemaito-mayor?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getSuperPaleLotedom(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/lotedom/super-pale?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getAgarra4Lotedom(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/lotedom/agarra-4?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getAnguilaDia(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/anguila/anguila-manana?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getAnguila12AM(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/anguila/anguila-medio-dia?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getAnguilaTarde(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/anguila/anguila-tarde?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getAnguilaNoche(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/anguila/anguila-noche?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getFloridaDia(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/americanas/florida-tarde?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getFloridaNoche(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/americanas/florida-noche?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getNewYorkDia(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/americanas/new-york-medio-dia?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}function getNewYorkNoche(t=new Date){const e=(t=new Date(t)).getFullYear();return t=`${t.getDate()}-${t.getMonth()+1}-${e}`,axiosInstance.get(`/americanas/new-york-noche?date=${t}`).then((async t=>{const a=await t.data;return _getLottery(a,e)})).catch((t=>{throw t}))}module.exports={getAllLotteries:getAllLotteries,getGanaMas:getGanaMas,getNacional:getNacional,getPegaMas:getPegaMas,getLotomasLeidsa:getLotomasLeidsa,getLotoPoolLeidsa:getLotoPoolLeidsa,getQuinielaPale:getQuinielaPale,getSuperKinoTVLeidsa:getSuperKinoTVLeidsa,getSuperPaleLeidsa:getSuperPaleLeidsa,getPega3MasLeidsa:getPega3MasLeidsa,getReal:getReal,getLotoReal:getLotoReal,getNYReal:getNYReal,getLotoPoolReal:getLotoPoolReal,getPega4Real:getPega4Real,getSuperPaleReal:getSuperPaleReal,getFloridaDia:getFloridaDia,getFloridaNoche:getFloridaNoche,getNewYorkDia:getNewYorkDia,getNewYorkNoche:getNewYorkNoche,getQuinielaLoteka:getQuinielaLoteka,getMegaChanceLoteka:getMegaChanceLoteka,getToca3Loteka:getToca3Loteka,getMCRepatideraLoteka:getMCRepatideraLoteka,getMegaLotoLoteka:getMegaLotoLoteka,getPrimeraDia:getPrimeraDia,getPrimeraNoche:getPrimeraNoche,getQuinielonDia:getQuinielonDia,getQuinielonNoche:getQuinielonNoche,getLoto5:getLoto5,getSuerteDia:getSuerteDia,getSuerteNoche:getSuerteNoche,getLoteDom:getLoteDom,getQuemaito:getQuemaito,getSuperPaleLotedom:getSuperPaleLotedom,getAgarra4Lotedom:getAgarra4Lotedom,getAnguilaDia:getAnguilaDia,getAnguila12AM:getAnguila12AM,getAnguilaTarde:getAnguilaTarde,getAnguilaNoche:getAnguilaNoche};